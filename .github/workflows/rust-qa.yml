name: Rust QA

on:
    workflow_call:
        inputs:
            toolchain:
                description: "Rust toolchain"
                required: false
                type: string
                default: "stable"
            env:
                description: "JSON object of environment variables to set"
                required: false
                type: string
                default: "{}"

jobs:
    qa:
        runs-on: ubuntu-latest
        env: ${{ fromJSON(inputs.env) }}

        steps:
            - uses: nigeleke/github/.github/actions/os-prerequisites@main
              with:
                  os: ubuntu-latest

            - uses: nigeleke/github/.github/actions/rust-setup@main
              with:
                  toolchain: ${{ inputs.toolchain }}

            - uses: nigeleke/github/.github/actions/rust-qa@main
